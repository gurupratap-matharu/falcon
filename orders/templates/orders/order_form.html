{% extends "layouts/base-sidebar.html" %}

{% load static %}

{% block title %}
    Order
{% endblock title %}

{% block breadcrumb %}
    Order
{% endblock breadcrumb %}

{% block page_title %}
    Passenger Details
{% endblock page_title %}

{% block content %}
    <div class="row">
        <div class="col-12 col-lg-8">
            <div class="card mx-3 mx-md-0">
                <div class="card-header pb-0">
                    <h5>Passenger</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        {{ formset }}
                        <input type="submit" class="btn bg-gradient-primary w-100" value="Save Passenger" />
                    </form>
                </div>
            </div>
            <div class="card mx-3 mx-md-0">
                <div class="card-header pb-0">
                    <h5>Your Contact Information</h5>
                </div>
                <div class="card-body">
                    <form method="post" role="form text-left">
                        {% csrf_token %}
                        {{ form.non_field_errors }}
                        {% for field in form.visible_fields %}
                            <div class="mb-3">
                                {{ field.errors }}
                                {{ field }}
                                {% if field.help_text %}
                                    <div class="form-text ms-2">
                                        <small>{{ field.help_text|safe }}</small>
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <div class="form-check form-check-info text-left ms-2">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" checked required/>
                            <label class="form-check-label" for="flexCheckDefault">
                                I agree the <a href="javascript:;" class="text-dark font-weight-bolder">Terms and Conditions</a>
                            </label>
                        </div>
                        <div class="d-flex justify-content-center mt-4">
                            <button class="btn bg-gradient-primary w-100" type="submit">Checkout</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-4">
            {% for item in cart %}
                {% with trip=item.trip %}

                    {% include "includes/trip_summary.html" %}

                {% endwith %}
            {% empty %}
                <div class="card mx-3 mx-md-0 mt-3 mt-md-0">
                    <div class="card-body">
                        <h5>Cart is empty! ðŸ“­</h5>
                    </div>
                </div>
            {% endfor %}
            <div class="card bg-transparent shadow-xl mt-3 mx-3 mx-md-0 mx-mt-0">
                <div class="overflow-hidden position-relative border-radius-xl"
                     style="background-image: url({% static "assets/img/curved-images/curved13.jpg" %})">
                    <span class="mask bg-gradient-dark"></span>
                    <div class="card-body position-relative z-index-1 p-3">
                        <i class="fas fa-coins text-white p-2" aria-hidden="true"></i>
                        <h5 class="text-white mt-4 mb-5 pb-2">Fare Summary</h5>
                        <div class="d-flex">
                            <div class="d-flex">
                                <div class="me-4">
                                    <p class="text-white text-sm opacity-8 mb-0">Card Holder</p>
                                    <h6 class="text-white mb-0">Jack Peterson</h6>
                                </div>
                                <div>
                                    <p class="text-white text-sm opacity-8 mb-0">Expires</p>
                                    <h6 class="text-white mb-0">11/22</h6>
                                </div>
                            </div>
                            <div class="ms-auto d-flex align-items-end justify-content-end">
                                <h5 class="text-white">$ {{ cart.get_total_price|floatformat:"-3g" }}</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
